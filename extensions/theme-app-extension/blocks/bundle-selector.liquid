{% comment %}
  Bundle Selector Block - App Block for Shopify Themes
  This block displays available bundles for the current product.
{% endcomment %}

{% if template == 'product' %}
  {% comment %} TEST ELEMENT - Remove this later {% endcomment %}
  <div class="bundle-test-element">
    {{ 'bundle_selector.test_loaded' | t }}<br>
    {{ 'bundle_selector.product' | t: title: product.title }}<br>
    {{ 'bundle_selector.product_id' | t: id: product.id }}<br>
    {{ 'bundle_selector.template' | t: template: template }}
  </div>

  {% comment %} Bundle Selector Container {% endcomment %}
  <div id="bundle-selector-container" class="bundle-selector">
    <div class="bundle-selector__header">
      <h3 class="bundle-selector__title">{{ block.settings.title | default: 'bundle_selector.title' | t }}</h3>
    </div>
    <div class="bundle-selector__bundles" id="bundle-selector-bundles">
      <!-- Bundles will be loaded here via JavaScript -->
    </div>
  </div>

  {% comment %} Loading State {% endcomment %}
  <div id="bundle-selector-loading" class="bundle-selector-loading">
    <div class="bundle-selector-loading__spinner"></div>
    <p>{{ block.settings.loading_text | default: 'bundle_selector.loading' | t }}</p>
  </div>

  {% comment %} No Bundles State {% endcomment %}
  <div id="bundle-selector-empty" class="bundle-selector-empty">
    <p>{{ block.settings.empty_text | default: 'bundle_selector.empty' | t }}</p>
  </div>
{% endif %}

{% schema %}
{
  "name": "Bundle Selector",
  "target": "section",
  "javascript": "bundle-selector.js",
  "stylesheet": "bundle-selector.css",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Available Bundles"
    },
    {
      "type": "text",
      "id": "loading_text",
      "label": "Loading Text",
      "default": "Loading bundles..."
    },
    {
      "type": "text",
      "id": "empty_text",
      "label": "Empty State Text",
      "default": "No bundles available for this product."
    },
    {
      "type": "header",
      "content": "Styling"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#f9f9f9"
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border Color",
      "default": "#e1e3e5"
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "Border Radius",
      "min": 0,
      "max": 20,
      "step": 1,
      "default": 8,
      "unit": "px"
    }
  ]
}
{% endschema %} 